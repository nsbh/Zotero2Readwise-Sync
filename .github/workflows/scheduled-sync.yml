name: My Scheduled Sync # 工作流程的名稱，會顯示在 Actions 頁面上

on:
  workflow_dispatch: # 這一行可以讓您手動觸發此流程，方便測試
  schedule:
    # 使用 cron 語法設定排程
    - cron: '0-59/5 * * * *'

  jobs:
  build:
    runs-on: ubuntu-latest # 指定任務要在什麼作業系統上執行

    steps:
      # 步驟 1: 取得你的程式碼
      - name: Checkout repo
        uses: actions/checkout@v3

      # 步驟 2: 設定 Python 環境
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # 步驟 3: 安裝依賴套件
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install zotero2readwise

      # 步驟 4: 執行同步腳本，並傳入你設定的密鑰
      - name: Run zotero2readwise
        run: |
          python -m zotero2readwise.run ${{ secrets.READWISE_TOKEN }} ${{ secrets.ZOTERO_KEY }} ${{ secrets.ZOTERO_LIBRARY_ID }}
